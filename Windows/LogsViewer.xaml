<Window x:Name="logsWindow"
        x:Class="bluestacks.Windows.LogsViewer"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:bluestacks.Windows"
        xmlns:converters="clr-namespace:bluestacks.Windows.Converters"
        xmlns:controls="clr-namespace:bluestacks.Controls"
        xmlns:oxy="clr-namespace:OxyPlot.Wpf;assembly=OxyPlot.Wpf" 

        mc:Ignorable="d"
        Style="{StaticResource TransparentWindow}"
        Height="650" Width="800">

    <Window.Resources>
        <!--#region Combobox Style-->
        <SolidColorBrush x:Key="ComboBoxNormalBackgroundBrush" Color="#33000000" />
        <SolidColorBrush x:Key="ComboBoxDisabledForegroundBrush" Color="#888" />
        <SolidColorBrush x:Key="ComboBoxDisabledBackgroundBrush" Color="#eee" />
        <SolidColorBrush x:Key="ComboBoxDisabledBorderBrush" Color="#888" />

        <ControlTemplate TargetType="ToggleButton" x:Key="ComboBoxToggleButtonTemplate">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="26"/>
                </Grid.ColumnDefinitions>

                <Border Grid.ColumnSpan="2" Name="Border"
                        BorderBrush="{StaticResource AccentColor}" 
                        CornerRadius="10" BorderThickness="1.7" 
                        Background="{StaticResource ComboBoxNormalBackgroundBrush}" />

                <Path Name="Arrow" Grid.Column="1" 
                      Data="M2.1 2.1C1.4 1.4 1.4 1.4.7 2.1 0 2.8 0 2.8.7 3.5L4.2 7C5.2906 8.0444 5.9962 8.0444 7 7L10.5 3.5C11.2 2.8 11.2 2.8 10.5 2.1 9.8 1.4 9.8 1.4 9.1 2.1L6.6479 4.5703C5.6 5.6 5.6 5.6 4.6123 4.5976z"
                      HorizontalAlignment="Center" VerticalAlignment="Center" 
                      Fill="{StaticResource AccentColor}"/>
            </Grid>

            <ControlTemplate.Triggers>
                <Trigger Property="ToggleButton.IsChecked" Value="True">
                    <!--<Setter Property="Panel.Background" TargetName="Border" Value="{StaticResource AccentColor}"/>
                    <Setter Property="Shape.Fill" TargetName="Arrow" Value="#000"/>-->
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <Style x:Key="ComboBoxFlatStyle" TargetType="{x:Type ComboBox}">
            <Setter Property="UIElement.SnapsToDevicePixels" Value="True"/>
            <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="True"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
            <Setter Property="TextElement.Foreground" Value="{StaticResource AccentColor}"/>
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton Name="ToggleButton" Grid.Column="2"
                                          ClickMode="Press" Focusable="False"
                                          IsChecked="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                          Template="{StaticResource ComboBoxToggleButtonTemplate}"/>

                            <!--Selected item text-->
                            <ContentPresenter Name="ContentSite" Margin="10,0" IsHitTestVisible="False"
                              HorizontalAlignment="Left" VerticalAlignment="Center"                              
                              Content="{TemplateBinding ComboBox.SelectionBoxItem}" 
                              ContentTemplate="{TemplateBinding ComboBox.SelectionBoxItemTemplate}"
                              ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"/>


                            <TextBox Name="PART_EditableTextBox"
                                     IsReadOnly="{TemplateBinding IsReadOnly}"
                                     Visibility="Hidden" Background="Transparent"
                                     HorizontalAlignment="Left" VerticalAlignment="Center"
                                     Focusable="True" >
                                <TextBox.Template>
                                    <ControlTemplate TargetType="TextBox" >
                                        <Border Name="PART_ContentHost" Focusable="False" />
                                    </ControlTemplate>
                                </TextBox.Template>
                            </TextBox>

                            <!-- Popup showing items -->
                            <Popup Name="Popup" Placement="Bottom"
                                   Focusable="False" AllowsTransparency="True"
                                   IsOpen="{TemplateBinding ComboBox.IsDropDownOpen}"
                                   PopupAnimation="Slide">
                                <Grid Name="DropDown" SnapsToDevicePixels="True"
                                    MinWidth="{TemplateBinding FrameworkElement.ActualWidth}"
                                    MaxHeight="{TemplateBinding ComboBox.MaxDropDownHeight}">
                                    <Border Name="DropDownBorder" 
                                            Background="#dd000000" Margin="0,-2,0,0"
                                            CornerRadius="3" 
                                            BorderThickness="1" 
                                            BorderBrush="{StaticResource DividorColor}"/>

                                    <ScrollViewer Margin="4" SnapsToDevicePixels="True">
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Grid>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="ItemsControl.HasItems" Value="False">
                                <Setter Property="FrameworkElement.MinHeight" TargetName="DropDownBorder" Value="95"/>
                            </Trigger>
                            <Trigger Property="ItemsControl.IsGrouping" Value="True">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="False"/>
                            </Trigger>
                            <Trigger Property="ComboBox.IsEditable" Value="True">
                                <Setter Property="KeyboardNavigation.IsTabStop" Value="False"/>
                                <Setter Property="UIElement.Visibility" TargetName="PART_EditableTextBox" Value="Visible"/>
                                <Setter Property="UIElement.Visibility" TargetName="ContentSite" Value="Hidden"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--#endregion-->



        <!--Fix textbox-->
        <Style x:Name="BaldStyle" TargetType="{x:Type TextBox}">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="AllowDrop" Value="true"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBoxBase}">
                        <Border 
                          Name="Border"
                          CornerRadius="2" 
                          Padding="2"
                          Background="Transparent"
                          BorderBrush="Transparent"
                          BorderThickness="1" >
                            <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Border" Property="Background" Value="Transparent"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="Transparent"/>
                                <!--<Setter Property="Foreground" Value="#888888"/>-->
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>



        <!--#region Scrollbar Style-->

        <SolidColorBrush x:Key="StandardBorderBrush" Color="#888" />
        <SolidColorBrush x:Key="StandardBackgroundBrush" Color="Black" />
        <SolidColorBrush x:Key="HoverBorderBrush" Color="#DDD" />
        <SolidColorBrush x:Key="SelectedBackgroundBrush" Color="Gray" />
        <SolidColorBrush x:Key="SelectedForegroundBrush" Color="White" />
        <SolidColorBrush x:Key="DisabledForegroundBrush" Color="#888" />
        <SolidColorBrush x:Key="GlyphBrush" Color="#444" />
        <SolidColorBrush x:Key="NormalBrush" Color="#888" />
        <SolidColorBrush x:Key="NormalBorderBrush" Color="#888" />
        <SolidColorBrush x:Key="HorizontalNormalBrush" Color="#FF686868" />
        <SolidColorBrush x:Key="HorizontalNormalBorderBrush" Color="#888" />

        <LinearGradientBrush x:Key="ListBoxBackgroundBrush" StartPoint="0,0" EndPoint="1,0.001">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="White" Offset="0.0" />
                    <GradientStop Color="White" Offset="0.6" />
                    <GradientStop Color="#DDDDDD" Offset="1.2"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>
        <LinearGradientBrush x:Key="StandardBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#FFF" Offset="0.0"/>
                    <GradientStop Color="#CCC" Offset="1.0"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>
        <LinearGradientBrush x:Key="PressedBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#BBB" Offset="0.0"/>
                    <GradientStop Color="#EEE" Offset="0.1"/>
                    <GradientStop Color="#EEE" Offset="0.9"/>
                    <GradientStop Color="#FFF" Offset="1.0"/>
                </GradientStopCollection>
            </GradientBrush.GradientStops>
        </LinearGradientBrush>

        <Style x:Key="ScrollBarLineButton" TargetType="{x:Type RepeatButton}">
            <Setter Property="Visibility" Value="Hidden"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="Focusable" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type RepeatButton}">
                        <Border Name="Border" Margin="1" CornerRadius="2" Background="{StaticResource NormalBrush}" BorderBrush="{StaticResource NormalBorderBrush}" BorderThickness="1">
                            <Path HorizontalAlignment="Center" VerticalAlignment="Center" Fill="{StaticResource GlyphBrush}" Data="{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter TargetName="Border" Property="Background" Value="{StaticResource PressedBrush}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ScrollBarPageButton" TargetType="{x:Type RepeatButton}">
            <Setter Property="Visibility" Value="Hidden"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Focusable" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type RepeatButton}">
                        <Border Background="Black" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ScrollBarThumb" TargetType="{x:Type Thumb}">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Focusable" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Border CornerRadius="4" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0"  Width="8" Margin="8,0,-2,0"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="VerticalScrollBar" TargetType="{x:Type ScrollBar}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition MaxHeight="0"/>
                    <RowDefinition Height="0.00001*"/>
                    <RowDefinition MaxHeight="0"/>
                </Grid.RowDefinitions>
                <Border Grid.RowSpan="3" CornerRadius="2" Background="Transparent" />
                <RepeatButton Grid.Row="0" Style="{StaticResource ScrollBarLineButton}" Height="18" Command="ScrollBar.LineUpCommand" Content="M 0 4 L 8 4 L 4 0 Z" />
                <Track Name="PART_Track" Grid.Row="1" IsDirectionReversed="true">
                    <Track.DecreaseRepeatButton>
                        <RepeatButton Style="{StaticResource ScrollBarPageButton}" Command="ScrollBar.PageUpCommand" />
                    </Track.DecreaseRepeatButton>
                    <Track.Thumb>
                        <Thumb Style="{StaticResource ScrollBarThumb}" Margin="1,0,1,0" Background="{StaticResource HorizontalNormalBrush}" BorderBrush="{StaticResource HorizontalNormalBorderBrush}" />
                    </Track.Thumb>
                    <Track.IncreaseRepeatButton>
                        <RepeatButton Style="{StaticResource ScrollBarPageButton}" Command="ScrollBar.PageDownCommand" />
                    </Track.IncreaseRepeatButton>
                </Track>
                <RepeatButton Grid.Row="3" Style="{StaticResource ScrollBarLineButton}" Height="18" Command="ScrollBar.LineDownCommand" Content="M 0 0 L 4 4 L 8 0 Z"/>
            </Grid>
        </ControlTemplate>
        <ControlTemplate x:Key="HorizontalScrollBar" TargetType="{x:Type ScrollBar}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition MaxWidth="18"/>
                    <ColumnDefinition Width="0.00001*"/>
                    <ColumnDefinition MaxWidth="18"/>
                </Grid.ColumnDefinitions>
                <Border Grid.ColumnSpan="3" CornerRadius="2" Background="#F0F0F0"/>
                <RepeatButton Grid.Column="0"  Style="{StaticResource ScrollBarLineButton}" Width="18" Command="ScrollBar.LineLeftCommand" Content="M 4 0 L 4 8 L 0 4 Z" />
                <Track Name="PART_Track" Grid.Column="1" IsDirectionReversed="False">
                    <Track.DecreaseRepeatButton>
                        <RepeatButton Style="{StaticResource ScrollBarPageButton}" Command="ScrollBar.PageLeftCommand" />
                    </Track.DecreaseRepeatButton>
                    <Track.Thumb>
                        <Thumb Style="{StaticResource ScrollBarThumb}" Margin="0,1,0,1" Background="{StaticResource NormalBrush}" BorderBrush="{StaticResource NormalBorderBrush}" />
                    </Track.Thumb>
                    <Track.IncreaseRepeatButton>
                        <RepeatButton Style="{StaticResource ScrollBarPageButton}" Command="ScrollBar.PageRightCommand" />
                    </Track.IncreaseRepeatButton>
                </Track>
                <RepeatButton Grid.Column="3" Style="{StaticResource ScrollBarLineButton}" Width="18" Command="ScrollBar.LineRightCommand" Content="M 0 0 L 4 4 L 0 8 Z"/>
            </Grid>
        </ControlTemplate>
        <Style x:Key="{x:Type ScrollBar}" TargetType="{x:Type ScrollBar}">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Style.Triggers>
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="Width" Value="Auto"/>
                    <Setter Property="Height" Value="18" />
                    <Setter Property="Template" Value="{StaticResource HorizontalScrollBar}" />
                </Trigger>
                <Trigger Property="Orientation" Value="Vertical">
                    <Setter Property="Width" Value="18"/>
                    <Setter Property="Height" Value="Auto" />
                    <Setter Property="Template" Value="{StaticResource VerticalScrollBar}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="FavsScrollViewer" TargetType="{x:Type ScrollViewer}">
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <ScrollContentPresenter Grid.Column="1"/>
                            <ScrollBar Name="PART_VerticalScrollBar" Value="{TemplateBinding VerticalOffset}" Maximum="{TemplateBinding ScrollableHeight}" ViewportSize="{TemplateBinding ViewportHeight}" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                            <ScrollBar Name="PART_HorizontalScrollBar" Orientation="Horizontal" Grid.Row="1" Grid.Column="1" Value="{TemplateBinding HorizontalOffset}" Maximum="{TemplateBinding ScrollableWidth}" ViewportSize="{TemplateBinding ViewportWidth}" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--#endregion-->


        <Geometry x:Key="Bug">
            M1680 330c26 26 47 52 47 57 0 5-32 42-72 82l-72 72 65 68c77 80 113 131 163 230 20 40 39 73 41 73 3-0 46-20 95-45 49-25 91-45 93-45 6-0 71 140 66 144-2 2-51 27-108 56l-103 51 6 42c4 23 9 90 13 149l6 108 118-0 119-0 0 80 0 80-133 0-133 0-35 102c-20 57-39 110-43 119-5 12 20 36 109 103 76 57 115 92 111 101-7 19-79 115-86 115-3 0-55-37-117-83l-112-83-74 70c-140 135-271 191-447 191-176 0-307-56-447-191l-74-70-115 84c-63 46-117 82-120 79-16-16-84-112-84-119-0-4 52-47 115-94 89-67 114-91 109-103-4-9-23-62-43-119l-35-102-133 0-133 0-0-80-0-80 119-0 118-0 6-108c4-59 9-126 13-149l6-42-103-51c-57-29-106-54-108-56-5-4 60-144 66-144 2-0 44 20 93 45 49 25 92 45 95 45 2-0 21-33 41-73 50-99 86-150 163-230l65-68-72-72c-40-40-72-77-72-83-0-13 92-104 106-104 5-0 49 40 97 88l88 89 57-20c46-16 82-20 182-20 100-0 136 4 182 20l57 20 88-89c48-48 92-88 98-88 6-0 32 22 58 48zm-575 253c-83 17-183 75-255 147-36 36-61 68-56 73 4 4 50 22 100 39 192 64 414 64 606-0 50-17 96-35 100-39 14-14-116-134-184-171-106-56-203-72-311-49zm452 405c-52 18-137 39-188 46l-92 12 0 479 0 479 27-7c142-34 293-170 369-330 96-200 108-469 33-672-17-43-24-53-37-47-10 4-60 22-112 40zm-869 8c-134 358 12 819 304 961 38 19 82 37 97 41l28 6-0-481-0-481-33 0c-56 0-209-36-287-68-41-16-78-30-82-31-4-1-16 23-27 53z
        </Geometry>
        <Geometry x:Key="Fire">
            M1087 401l120 201 73-73 74-72 55 60c30 33 90 106 132 162 185 246 275 451 287 653 8 125-12 217-72 339-77 156-221 285-398 357-250 102-547 78-781-64-33-20-96-72-141-117-166-165-233-382-188-603 50-246 260-568 600-920l119-124 120 201zm-260 181c-243 277-391 522-425 702-30 156 18 311 134 436 58 61 113 108 121 101 2-3-3-31-11-64-30-130-7-253 81-432 60-119 213-349 225-336 4 4 44 64 90 132l82 123 55-53c53-52 55-53 69-34 35 46 96 159 125 230 57 144 71 258 45 370-8 33-13 61-11 64 8 7 64-40 122-103 222-237 182-551-120-950l-59-78-87 86-86 86-120-200c-66-110-121-200-122-200-1 0-50 54-108 120zm46 812c-67 138-86 206-78 283 15 142 120 255 237 255 82-0 172-65 211-152 32-73 33-186 1-283-35-108-34-107-89-52-27 26-51 47-54 47-4 0-39-50-79-110-40-61-76-110-81-110-4 0-35 55-68 122z
        </Geometry>
        <Geometry x:Key="Warning">
            M980 1025l0 695-150 0-150 0-0-695-0-695 150-0 150-0 0 695zM980 2025l0 135-150 0-150 0-0-135-0-135 150-0 150-0 0 135z
        </Geometry>
        <Geometry x:Key="Info">
            M890 415l0 135-175 0-175 0 0-135 0-135 175 0 175 0 0 135zM892 940l0 475 0 475 170 0 170 0 0 110 0 110-485 0-485 0 0-110 0-110 165 0 165 0 0-585-.919-364.66-270.081-.34 2-245 569-1z
        </Geometry>

        <CollectionViewSource x:Key="LogsViewSource" Source="{Binding LogsContainer}"/>
        <CollectionViewSource x:Key="ConnectionsViewSource" Source="{Binding ConnectionsContainer}"/>

        <converters:DateTimeToStringConverter x:Key="DateConverter"/>
        <converters:PacketDirectionBoolConverter x:Key="DirConverter"/>
        <converters:PacketSentConverter x:Key="SentConverter"/>
        <converters:LogLevelConverter x:Key="LogLevelConverter"/>
        <converters:HexArrayConverter x:Key="HexConverter"/>
        <converters:NumericConverter x:Key="NumConverter"/>

        <Style x:Key="CheckBoxStyle" TargetType="{x:Type controls:FilterCheckbox}">
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
        </Style>

    </Window.Resources>







    <Grid Margin="20">
        <!--Window controls-->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Height="40">
            <controls:WindowControlButton 
                Width="40" Height="40" Scale="0.6" MaxScale="0.65"
                PathData="{StaticResource RefreshIcon}"
                Click="Refresh" 
                FillColor="{StaticResource InactiveColor}" GlowColor="#90ef90"/>
            <controls:WindowControlButton 
                Width="40" Height="40" Scale="0.6" MaxScale="0.65"
                PathData="{StaticResource CloseIcon}" 
                Click="ExitButtonClick" FillColor="{StaticResource InactiveColor}" GlowColor="#d93732"/>
        </StackPanel>

        <!--Main Content-->
        <StackPanel Orientation="Vertical">


            <!--Filters-->
            <StackPanel MinHeight="42" Width="759" Orientation="Horizontal" Grid.ColumnSpan="2">

                <StackPanel Orientation="Horizontal">
                    <!--Window selector-->
                    <StackPanel Margin="0,12.8" VerticalAlignment="Top" Orientation="Vertical">
                        <!--Date selector-->
                        <Grid Width="118" Height="32" Margin="0,0,10,10">
                            <TextBox x:Name="AfterDateFilter_TextBox" Text="06/12/24 03:48:11" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="13"
                         Foreground="{StaticResource AccentColor}" Background="Transparent" BorderBrush="Transparent"/>
                            <Border Background="#44000000" CornerRadius="10" BorderBrush="{StaticResource AccentColor}" BorderThickness="1.7" IsHitTestVisible="False"/>
                        </Grid>
                        <Grid Width="118" Height="32" Margin="0,0,10,0">
                            <TextBox x:Name="BeforeDateFilter_TextBox" Text="06/12/24 03:48:11" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="13"
                         Foreground="{StaticResource AccentColor}" Background="Transparent" BorderBrush="Transparent"/>
                            <Border Background="#44000000" CornerRadius="10" BorderBrush="{StaticResource AccentColor}" BorderThickness="1.7" IsHitTestVisible="False"/>
                        </Grid>
                    </StackPanel>


                    <Border 
                x:Name="LogsFilters" VerticalAlignment="Top" HorizontalAlignment="Center" Height="96" Margin="0,0,10,0"
                CornerRadius="14,14,0,0" Background="#22000000" BorderBrush="{StaticResource DividorColor}" BorderThickness="1">
                        <StackPanel Margin="12" Orientation="Vertical">

                            <StackPanel Orientation="Horizontal">
                                <controls:FilterCheckbox 
                                    x:Name="Info" Style="{StaticResource CheckBoxStyle}" CheckboxChecked="LogCheckboxChecked"
                                    Geometry="{StaticResource Info}" Color="{StaticResource AccentColor}"/>
                                <controls:FilterCheckbox 
                                    x:Name="Warning" Style="{StaticResource CheckBoxStyle}" CheckboxChecked="LogCheckboxChecked"
                                    Margin="6,0" Geometry="{StaticResource Warning}" Color="#ff6d68"/>
                                <controls:FilterCheckbox 
                                    x:Name="Packets" Style="{StaticResource CheckBoxStyle}" CheckboxChecked="Packets_CheckboxChecked"
                                    Color="#8f60b5" Geometry="{StaticResource LogIcon}"/>
                            </StackPanel>

                            <StackPanel Margin="0,6" Orientation="Horizontal">
                                <controls:FilterCheckbox 
                                    x:Name="Error" Style="{StaticResource CheckBoxStyle}" CheckboxChecked="LogCheckboxChecked"
                                    Color="#ff3232" Geometry="{StaticResource Bug}"/>
                                <controls:FilterCheckbox 
                                    x:Name="Fatal" Style="{StaticResource CheckBoxStyle}" CheckboxChecked="LogCheckboxChecked"
                                    Margin="6,0" Color="#f90046" Geometry="{StaticResource Fire}"/>
                                <controls:FilterCheckbox 
                                    x:Name="Debug" Style="{StaticResource CheckBoxStyle}" CheckboxChecked="LogCheckboxChecked"
                                    Color="#11ff11" Geometry="{StaticResource Bug}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>



                <!--Log filters-->




                <!--Packet filters-->
                <Border 
                    x:Name="PacketsFilters" VerticalAlignment="Top" HorizontalAlignment="Left" Height="96"
                    CornerRadius="14,14,0,0" Background="#22000000" BorderBrush="{StaticResource DividorColor}" BorderThickness="1">
                    <StackPanel Orientation="Horizontal">
                        <StackPanel Margin="12" Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <controls:FilterCheckbox CheckboxChecked="InboundFilter_CheckboxChecked"
                                x:Name="InboundFilter" Style="{StaticResource CheckBoxStyle}"
                                Color="{StaticResource Download}" Geometry="{StaticResource ArrowDown}"/>
                                <controls:FilterCheckbox CheckboxChecked="OutboundFilter_CheckboxChecked"
                                x:Name="OutboundFilter" Style="{StaticResource CheckBoxStyle}"
                                Margin="5,0" Color="{StaticResource Upload}" Geometry="{StaticResource ArrowUp}"/>
                                <!--<ComboBox Width="150" Height="32" Margin="5,0,5,0"
                                  x:Name="ConnectionsSelector"
                                  Style="{StaticResource ComboBoxFlatStyle}"
                                  SelectionChanged="ConnectionsSelector_SelectionChanged">
                            </ComboBox>-->
                            </StackPanel>
                            <StackPanel Margin="0,6" Orientation="Horizontal">
                                <controls:FilterCheckbox 
                                x:Name="BlockedFilter" Style="{StaticResource CheckBoxStyle}"
                                Color="#BB6464" Geometry="{StaticResource Cross}"/>
                                <controls:FilterCheckbox 
                                x:Name="AutoUpdate" Style="{StaticResource CheckBoxStyle}"
                                Margin="5,0" Color="#f8f77f" Geometry="{StaticResource RefreshIcon}"/>
                            </StackPanel>
                        </StackPanel>

                        <StackPanel Margin="-15,8,-10,0">
                            <Label Foreground="{StaticResource InactiveColor}" Content="Min length" FontSize="8"/>
                            <TextBox x:Name="Length" Text="0" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="13" Margin="0,-10,0,0"
                                Foreground="{StaticResource AccentColor}" Background="Transparent" BorderBrush="Transparent"/>

                            <Label Foreground="{StaticResource InactiveColor}" Content="Max length" FontSize="8" Margin="0,10,0,0"/>
                            <TextBox x:Name="MaxLength" Text="0" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="13" Margin="0,-10"
                                Foreground="{StaticResource AccentColor}" Background="Transparent" BorderBrush="Transparent"/>
                        </StackPanel>

                        <Border CornerRadius="10" 
                        VerticalAlignment="Top" HorizontalAlignment="Right" 
                        Margin="10,4"
                        Background="#33000000" Height="90" Width="230"
                        BorderThickness="1" BorderBrush="{StaticResource DividorColor}">
                            <ScrollViewer Margin="3">
                                <ListBox x:Name="Connections" 
                                 ItemsSource="{Binding Source={StaticResource ConnectionsViewSource}}"
                                 Background="Transparent" BorderThickness="0" SelectionMode="Multiple"
                                 Width="200" MaxWidth="200">
                                    <ListBox.Resources>
                                        <DataTemplate DataType="{x:Type local:LogsViewer+ConnectionModel}">
                                            <StackPanel Height="20" Margin="2.5" Orientation="Horizontal">
                                                <TextBlock Text="{Binding Path=Address}" 
                                                   VerticalAlignment="Center" 
                                                   Foreground="{StaticResource AccentColor}"/>
                                                <TextBlock Margin="4,0" Text="{Binding Path=Info}" FontSize="10" 
                                                   VerticalAlignment="Center" 
                                                   Foreground="{StaticResource AccentColor}"/>
                                                <!--<oxy:PlotView Model="{Binding Path=Chart}"/>-->
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.Resources>
                                </ListBox>
                            </ScrollViewer>
                        </Border>
                    </StackPanel>

                </Border>





            </StackPanel>



            <!--Log Content-->
            <Border CornerRadius="0,0,10,10" Background="{StaticResource LightBackColor}" MinHeight="514" MaxHeight="514"
                    BorderThickness="1" BorderBrush="{StaticResource DividorColor}">
                <ItemsControl x:Name="Items" Width="Auto" ItemsSource="{Binding Source={StaticResource LogsViewSource}}"
                                      VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel IsItemsHost="True" VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    
                    <ItemsControl.Template>
                        <ControlTemplate TargetType="{x:Type ItemsControl}">
                            <Border BorderThickness="{TemplateBinding BorderThickness}" 
                                    Padding="{TemplateBinding Padding}" 
                                    BorderBrush="{TemplateBinding BorderBrush}" 
                                    Background="{TemplateBinding Background}" 
                                    SnapsToDevicePixels="True">
                                <ScrollViewer x:Name="Scroll" CanContentScroll="True" Margin="10">
                                    <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                </ScrollViewer>
                            </Border>
                        </ControlTemplate>
                    </ItemsControl.Template>
                    
                    <ItemsControl.Resources>
                        <DataTemplate DataType="{x:Type local:LogsViewer+LogModel}">
                            <Grid Height="30">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <StackPanel.Resources>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Height" Value="30"/>
                                            <Setter Property="Margin" Value="6"/>
                                        </Style>
                                    </StackPanel.Resources>
                                    <Border Background="Transparent" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="{StaticResource AccentColor}" 
                                                BorderThickness="1">
                                        <TextBlock Text="{Binding Path=Date, Converter={StaticResource DateConverter}}" Foreground="#625970" Opacity="0.7"/>
                                    </Border>
                                    <Border Background="Transparent" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="{StaticResource AccentColor}" 
                                                BorderThickness="1">
                                        <TextBlock Text="{Binding Path=Type, Converter={StaticResource LogLevelConverter}}" MinWidth="50" TextAlignment="Left" FontWeight="Bold" Foreground="{Binding Path=TypeForeground}"/>
                                    </Border>
                                    <TextBlock Text="{Binding Path=Text}" Foreground="{Binding Path=TextForeground}"/>
                                </StackPanel>
                                <Border Background="Transparent" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="{StaticResource AccentColor}" 
                                                BorderThickness="1"/>
                            </Grid>
                        </DataTemplate>
                        <DataTemplate DataType="{x:Type local:LogsViewer+PacketModel}">
                            <Grid Height="30">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <StackPanel.Resources>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Height" Value="30"/>
                                            <Setter Property="Margin" Value="6"/>
                                        </Style>
                                    </StackPanel.Resources>
                                    <Border Background="Transparent" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="{StaticResource AccentColor}" 
                                                BorderThickness="1">
                                        <TextBlock Text="{Binding Path=Date, Converter={StaticResource DateConverter}}" Foreground="#625970" Opacity="0.7"/>
                                    </Border>
                                    <Border Background="{Binding Path=TypeForeground}" Height="35" 
                                                IsHitTestVisible="False" BorderBrush="Black" 
                                                BorderThickness="1">
                                        <TextBlock Text="{Binding Path=Type, Converter={StaticResource SentConverter}}" MinWidth="25" MaxWidth="25"
                                                           FontWeight="Bold" TextAlignment="Center" Foreground="Black"/>
                                    </Border>
                                    <Border Background="{Binding Path=DirForeground}" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="Black"
                                                BorderThickness="1">
                                        <TextBlock Text="{Binding Path=Direction, Converter={StaticResource DirConverter}}" MinWidth="25" MaxWidth="25" 
                                                           FontWeight="Bold" TextAlignment="Center" Foreground="Black"/>
                                    </Border>
                                    <Border Background="Transparent" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="{StaticResource AccentColor}" 
                                                BorderThickness="1">
                                        <TextBlock Text="{Binding Path=Length, Converter={StaticResource NumConverter}}" MinWidth="30" TextAlignment="Left" FontWeight="Bold" Foreground="{StaticResource AccentColor}"/>
                                    </Border>
                                    <Border Background="Transparent" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="{StaticResource AccentColor}" 
                                                BorderThickness="1">
                                        <TextBlock Text="{Binding Path=RemoteAddr}" MinWidth="130" MaxWidth="130" TextAlignment="Right" FontWeight="Bold" Foreground="{StaticResource AccentColor}"/>
                                    </Border>
                                    <Border Background="Transparent" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="{StaticResource AccentColor}" 
                                                BorderThickness="1" Visibility="{Binding Path=PvePacket}">
                                        <TextBlock Text="{Binding Path=PveId}" MinWidth="45" TextAlignment="Left" FontWeight="Bold" Foreground="{StaticResource AccentColor}"/>
                                    </Border>

                                    <TextBlock Text="{Binding Path=Bytes, Converter={StaticResource HexConverter}}" MaxWidth="540" Foreground="White"/>
                                </StackPanel>
                                <Border Background="Transparent" Height="30" 
                                                IsHitTestVisible="False" BorderBrush="{StaticResource AccentColor}" 
                                                BorderThickness="1"/>
                            </Grid>
                            <!--<TextBlock Margin="6,0" Text="{Binding Path=Target}" MaxWidth="540" Foreground="White"/>-->
                        </DataTemplate>
                    </ItemsControl.Resources>
                </ItemsControl>

                <!--<ScrollViewer x:Name="Scroll" Margin="10">

                </ScrollViewer>-->
            </Border>


        </StackPanel>
    </Grid>
</Window>
